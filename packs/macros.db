{"name":"ToggleDaylight","type":"script","author":"gJdONrabJ2SyRfYT","img":"icons/svg/dice-target.svg","scope":"global","command":"(async () => {\n    const extLightColor = \"#000001\";\n    const scene = game.scenes.active;\n\n    const foundExtLights = canvas.lighting.placeables.filter(l => l.data.tintColor === extLightColor && l.scene === scene );\n\n    if (foundExtLights?.length) {\n        const isHidden = !foundExtLights[0].data.hidden;\n        const darkLevel = !isHidden ? 0 : 1;\n\n        const updates = [];\n        foundExtLights.forEach(l => {\n            updates.push({ _id: l.id, hidden: isHidden});\n        });\n\n        await scene.updateEmbeddedDocuments(\"AmbientLight\", updates);\n        await scene.update({darkness: darkLevel});\n    }\n})()","folder":null,"sort":0,"permission":{"default":0,"gJdONrabJ2SyRfYT":3},"flags":{"core":{"sourceId":"Macro.aCJP0z2jsvhBkW1g"},"scene-packer":{"sourceId":"Macro.aCJP0z2jsvhBkW1g"}},"_id":"WckFOlYsNSUTMQlN"}
